type Mutation {
  join: ID!
  register: RegisterResult!
  play(input: PlayInput!): Boolean!
}

type Query {
  users: [User!]!
  whoami: ID
  ping: String!
  gameStatus(gameId: ID!): GameStatus!
}

type RegisterResult {
  accessToken: String!
  user: User!
}

type User {
  id: ID!
  tokenVersion: Int!
}

input PlayInput {
  gameId: ID!
  token: Token!
  position: Position!
}

enum Token {
  O
  X
}

enum Position {
  A
  B
  C
  D
  E
  F
  G
  H
  I
}

interface Game {
  id: ID!
  me: Token!
}

union GameStatus = GamePlaying | GameDraw | GameWon

type GamePlaying implements Game {
  id: ID!
  me: Token!
  next: Token!
}

type GameDraw implements Game {
  id: ID!
  me: Token!
}

type GameWon implements Game {
  id: ID!
  me: Token!
  winner: Token!
}
